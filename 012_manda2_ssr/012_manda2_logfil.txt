(this file technically continued from 010_manda2 logfil.txt)

2304 2024
jeg vil lave en SSR Svelte ting.

jeg tror jeg har det kørende nu. localhost8080 serverer min svelte forside. Det er jeg ret glad for.


jeg hader det virkelig når jeg kommer til at skrive noget i et  vindue jeg ikke er obs på. Det er ret irriterende.

jeg har fået det meste af SSR til at virke men browser vinduet opdaterer ikke af sig selv. ... mhm ...

npm run build:watch

jeg tror nu jeg ved at finde ud af hvad fejlen er: min backend brokker sig over at en fil ikke eksisterer.
-> nej det er ikke det.

fucking connect. hvordan fungerer det??

Det kunne være jeg skulle prve anders' ting first.
ok, selv ikke anders' ting har det. hmmm ......

anyway, så skal jeg vell ..... hvad er det næste jeg skal lave?

routes
email
testing
authe
autho

artware

jeg skal sådan set stadig have login i frontenten -- altså, at man er logget ind. 

lave en fetch metode som er importeret.

Jeg skal have router kørende.

npm i svelte-navigator

har fikset router, nu kan jeg lave routes.

2404 2024
på sin vis er det meget realistisk at jeg skal lave projektet nærmest forfra, hver gang jeg lærer noget nyt og gerne vil itnegrere det.

jeg tror jeg bare bruger et browser plugin til at liverefresh?

ller måske bare droppe d et.

setup grid CSS ... auth.

Skal have at auth ser om man er logget ind  eller ej.

Havde en fejl med svelte navigator router: jeg havde glemt / i  link to="/ducks" ...

Men nu virker det igen.

stylede list til at have ingen margin og ingen dots.

Havde en irriterende ting hvor min nodemon tjekkede for hurtiugt imens jeg ædnrede i svelte filer -- så nodemon crashede fordi vite build ikke var færdig. Så jeg satte delay i nodemon json i ms.
--> eller det TROEDE jeg. faktisk var det ... hmm ... jeg er ikke helt sikker på hvorfor det sker?
det virker til at være hvis jeg forsøger at tilgå filen direkte -- uden om svelte navigator? Så det er vist ret sikkert.

2504 2024
uf, min tekst ser grim ud. Jeg har faktisk aldrig fundet ud af hvordan man styler tekst.

Id et hele taget har jeg ikke fundet ud af meget med CSS. jhmmmhmmmhmhmhmhmhmhmhmhm .

læse læse læse

Jeg har fundet text-align.

Jeg har fundet padding-left
margin-top
padding-top

Jeg har sat min tekst i en <h> inde i en <div>. Diven er styret og sat til textalign center, text-indent styrer så dens placering. Så kan jeg lave gylden ratio! Dejligt.

Hvis jeg bruger Auth Routere ... så skal jeg vil i realiteten have en path til unsecured og en ... men jeg skal jo under alle omstændigheder ... hm...

hav passwords i backend. Så frontend skal bare se om man er logget ind eller ej?

Hvis session skal tjekkes skal jeg sætte mongodb op først. Right? Right.

Installerer mongo db 7, sætter det med connect-mongo. Hmm ...

den brokker sig stadig over et eller andet -- server select time out? 30 sekunder? irriterende at vente på.

nu crasher den ikke længere, men, det virker til at jeg ikke kan tilgå mongodb med mongosh imens min app kører? det er ret irriterende. 

har jeg glemt mongoClient?

jeg har fået etableret db forbindelse og ka nskrive til den.

men der er en irriterende fejl hvor ... jeg har jo både min app og min mongoshell -- hvis jeg forbinder med den ene, så skal jeg trykke enter på mongod-terminalen, før jeg kan lave noget med den anden.

måske er det fortdi jeg har for mange forb åben? memory leak i forb m server genstart pga ændringer over nodemon?

kan ikke lige reproducere fejlen. Hm.

2604 2024
tog et kig på gamle projekter, indså at jeg skal tjekke auth i backenden. Hvis personen ikke er logget ind (ikke har session) så skal de slet ikke have lov.

det viser sig at fordi jeg har en index.html, så, hvis jeg tilgår /, så vil index altid blive ramt. det virker sku lidt som BS.

Det viser sig at jeg HELE TIDEN ... dvs aldrig har ramt min frontend ordentligt, fordi jeg har kaldt mappen frontend og anders har kaldt sin "client".

istedet for at det skal være et problem skal det være nyttigt-. jeg vender det om og laver index til min loginside.

ok, nu har jeg  en slags login funk. Dvs ... man ka ntrykke på en boks og s åkommer ma nvidere? ikke særligt sikkert.

jeg er ikke helt sikker på hvorfro (jeg tror måske det er fordi express.static ikke er rekursiv?? måske??)
men nu rammer jeg min login html på serveren og ikke min build dist index html, når jeg går på 8080/

nej .--.- jeg får stadig en fejl hvor server ikke kan finde loginpagen ...

ah -- det er fordi jeg har omødbt loginpagehtml til index.html, og sat express static (den) ovenover express static frontend dist. Så loginen bliver ramt først.

min kop flyder over med løsninger.

been messing with session etc for a bit now. i think im starting to get it. sorta.

i forget why but ive moved my login frontpage into a static html index. it sjust html css and java singlepage. login fetch to backend which sets req.session cookies

i tested that req ses cook endpoint, it works. it sets the cookies.

somehow ... im relieved.

im taking a short nap every half hour. on the floor, like a cat. it helps. i can feel my brain rearranging itself. like a guy cleaning out his wardrobe. it hurts, a little. in a good way.

ikeep thinking i have to do it the right way  but fuck that. thers the way which works, which walks

"and things have learned to walk which ought to crawl"

"where do you want to go"
"i dont know"
"then it doesnt matter"

or more accurately, it feels like ten guys tryna bang a couch through a small door and they're in a hurry.

2704 2024
ok, den kan se sessions. hvoprdan får jeg min index frontpage til at se det også? hvis session ... så redirect?

chatgpt gør mig opmærkmsom på at jeg jo retn faktisk ikke bruger express auth, når jeg serverer en static page.

OK, jeg laver en auth middleware.

havde glemt at passe min middlewware req, res, next.

det er altså lidt forvirrende!

måske hvis jeg rykker static nederst?
jep, that did it. det er virkelig en stack!

think im getting it now.

hvis man nexter noget next("hell0"); så får man bare dét "hello".

backend permission, roles ... name.

ok nu er det bare frontend der tjekker om man er logget in. log in status.

ok .. det er et rod nu. men det er i det mindste MIT rod.

det ser OK ud, agtig. Altså... lidt.

jeg skal lige finde ud af det med den fetch og dens json. hvorfor bliver newusersignup ikke ramt?
'
jeg havde glemt app use router
og jeg havde router GET og ikke router post

now it woiirks

ok nu har jeg forbindelse. min svelte kan ramme min backend med en ny brugerdata- så skal den cryptes og postes til user api.